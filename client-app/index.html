<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
			rel="stylesheet"
		/>
		<title>NoruBanner</title>
        <style>
            :root {
				--container-width: min(100%, 1200px);
				--bg-color: cornsilk;
				--inner-padding: 18px;
			}

			body {
				margin: 0;
				font-family: "Montserrat", sans-serif;
			}

			.container   {
				width: var(--container-width);
				margin: 0 auto;
				box-sizing: border-box;
				padding-left: var(--inner-padding);
				padding-right: var(--inner-padding);
			}

			.main-header, .main-footer {
				width: 100%;
				min-height: 100px;
				background-color: var(--bg-color);
			}

			.main-header h1 {
				display: inline-block;
				margin: 1em 0;
			}

			.banner {
				display: block;
				max-width: 100%;
				margin: 18px auto;
				cursor: pointer;
			}

			.banner + span {
				display: block;
				text-align: center;
			}
        </style>
	</head>
	<body>
		<header class="main-header">
			<div class="main-header__container container">
				<h1>NoruBanner</h1>
			</div>
		</header>
		<main class="main-content">
			<div class="main-content__container container">
				<h2 class="main-content__header">Lorem, ipsum dolor.</h2>
				<p class="main-content__short">
					Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur id ad in assumenda dolorem
					consequuntur earum temporibus saepe porro enim mollitia eligendi, voluptate consectetur. Enim, autem
					quibusdam. Voluptate ipsum nesciunt recusandae voluptatibus perspiciatis harum, quidem rerum
					cupiditate alias totam ipsam praesentium aliquam sequi id numquam temporibus odit vitae ducimus
					excepturi facere suscipit maiores optio. Quas adipisci repellat natus earum optio, minima laborum,
					et aspernatur atque necessitatibus deserunt nemo autem aliquam omnis accusantium illum quam amet
					dicta sit veniam consequatur. Necessitatibus ducimus quidem atque eum quaerat cumque sint aperiam
					tenetur iure hic dolorum nostrum doloremque veritatis modi quam ullam, aliquam animi.
				</p>
                <hr>
				<p class="main-content__content">
					Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet doloribus quia, nihil illo hic
					reprehenderit nisi, quaerat voluptatum vel, aliquam consequatur id. Consequatur animi repellat
					perferendis, consequuntur debitis magni veniam totam deleniti voluptas, inventore minima asperiores
					earum dolore soluta ipsam nesciunt dignissimos itaque. Labore necessitatibus cupiditate excepturi
					amet vitae quis esse dolores repellat hic aperiam, totam numquam non. Architecto quidem minus
					laboriosam beatae commodi possimus adipisci tempora doloribus recusandae consequuntur, praesentium
					eveniet unde magni ducimus laborum fuga ipsum similique nam ab pariatur in quod? Eaque laudantium
					quae qui consequuntur impedit nulla laborum! Dolorum maxime commodi culpa veritatis suscipit
					temporibus adipisci unde architecto magni nobis, velit aspernatur saepe ex excepturi, aliquid
					pariatur deleniti facilis, hic iste nostrum voluptatum voluptas doloremque quibusdam? Necessitatibus
					omnis praesentium numquam, itaque sunt minima, libero eveniet veritatis impedit at optio eius
					asperiores fugiat harum dolor a vitae cupiditate nam quae dicta voluptatum! Reiciendis laudantium a
					earum necessitatibus iste culpa obcaecati minus ex animi rerum blanditiis doloremque, similique
					magnam incidunt quam eius suscipit error neque. Fuga qui in dignissimos assumenda esse optio officia
					est beatae adipisci excepturi recusandae porro eos aperiam ex quaerat laboriosam possimus magnam,
					voluptatem cum corporis quia. Facilis placeat quo sequi amet tenetur quia adipisci quae dolorum
					explicabo odit impedit, vero deserunt maiores harum alias magni omnis exercitationem ea labore! Rem
					fugit delectus dolores reiciendis voluptatem vitae cupiditate ab, veniam veritatis cum doloribus
					voluptate sit a! Eius non quae numquam obcaecati, doloremque nihil facilis corporis ea vitae
					explicabo, consequatur eligendi culpa animi quas quos, impedit voluptas ex eum tenetur in assumenda
					officiis earum consectetur. Eligendi maiores cum ad veritatis dignissimos mollitia id a dolore hic
					aliquam, iusto numquam neque molestiae perferendis eum quos sequi exercitationem soluta culpa et
					suscipit. Consectetur quam dolore voluptates laborum nulla incidunt iste facere in magnam labore
					dicta repudiandae nemo, doloremque obcaecati aut error soluta maxime praesentium delectus facilis
					velit iure culpa ullam fuga! Id dolor eos velit quas alias nisi ullam laboriosam quaerat recusandae
					aliquam unde impedit, fugit dolore nobis ea commodi voluptatibus harum odit iusto dolorem esse
					nostrum obcaecati a reprehenderit. Sit ipsum perspiciatis ipsa quisquam expedita suscipit velit
					consequuntur officiis cupiditate non. Sit, blanditiis! Neque ad mollitia excepturi exercitationem,
					explicabo ea soluta hic! Quae cumque laboriosam minus sed nihil laudantium ducimus delectus aliquam,
					voluptatibus obcaecati enim eius consequuntur omnis, non qui animi fuga adipisci similique
					voluptates dignissimos neque deleniti aperiam sit! Consequuntur eos explicabo ad eaque dolorem,
					cumque cupiditate repellendus exercitationem, aspernatur corrupti dicta inventore quibusdam minima
					perspiciatis quia aperiam doloremque natus, iure pariatur alias! Eligendi, enim, reprehenderit earum
					voluptatibus mollitia aut ipsum non repellendus totam libero odio suscipit natus pariatur iste.
					Incidunt nisi magnam perspiciatis perferendis pariatur asperiores ipsam consectetur nam eligendi
					quidem minus dolorum debitis, tempora nihil eaque veritatis, deserunt explicabo quam sapiente quos,
					ullam praesentium porro. Veritatis aliquam obcaecati in tenetur officiis ullam quaerat magni nam
					atque ab ipsam recusandae saepe, qui mollitia, eveniet odit assumenda vero dicta iusto vel officia
					sunt quae eligendi perspiciatis. Dolores facilis officiis similique debitis architecto nisi adipisci
					iure culpa, ut aperiam fuga ipsa consequatur sint ducimus numquam? Esse, facilis officia. Impedit
					atque accusantium sint hic, placeat libero pariatur fugiat distinctio porro sapiente repudiandae. Ea
					nemo dolorum eaque quos obcaecati voluptas temporibus earum quia in pariatur! Hic error quas,
					asperiores sequi maxime sunt illum modi tenetur eaque numquam consequatur, saepe voluptatibus
					temporibus beatae nobis. Excepturi quod enim magnam dolore sapiente eius nam rem architecto
					voluptatibus consequuntur deleniti ad, quis ipsa impedit eaque voluptatem id recusandae maiores sint
					aspernatur est corrupti! Excepturi ea eaque sunt quod neque odio laboriosam non debitis
					necessitatibus, enim beatae iure quis vero. Voluptas facilis accusamus vitae at obcaecati? Quia
					earum quasi, eveniet eius numquam sequi quae, similique cumque molestiae laudantium dolore odio
					debitis ipsam officia tempore minima illo. Nihil alias magni officiis nisi debitis quo omnis quos
					quod repudiandae error sapiente incidunt magnam suscipit non, voluptates tenetur, veritatis,
					corporis eaque iusto earum est itaque. Voluptatum, enim molestiae placeat assumenda eaque earum
					dolorum qui, corrupti, sint aspernatur animi est perspiciatis? Unde exercitationem esse obcaecati
					nesciunt rem rerum vero. Quia praesentium error dolorum doloremque quisquam accusamus consequatur
					quo totam nobis expedita explicabo eveniet, consectetur beatae? Aspernatur illo corrupti facilis
					iste porro! Doloribus praesentium quos non tenetur sint consequatur ipsum? Inventore quos accusamus
					enim itaque quisquam exercitationem. Ducimus nostrum deleniti, fugiat tenetur quas ad illum eum
					earum error quam aliquid animi sequi dolorum! Repudiandae distinctio, recusandae odio esse iusto
					dicta optio ipsam, obcaecati soluta illum laborum corporis. Minima fuga porro nobis odit repellat
					corporis ut corrupti dolorem. Repellendus perferendis cum veniam officia dolorum officiis aliquam
					porro voluptatum quasi dignissimos sed dolore optio odio sint itaque nostrum, explicabo quae illum
					ratione molestiae libero nihil consequatur reprehenderit! Fugit officiis dignissimos aperiam unde
					deleniti natus fugiat sed magni, maiores accusamus ea laboriosam voluptates quaerat dolorem iste
					nostrum, quas nihil quibusdam voluptas eum provident vitae quos! Dolor odit similique eius maxime
					fuga distinctio eum minus sit ullam, animi possimus deleniti libero ducimus? Eos sunt ipsam illum
					maxime error, nostrum quis deserunt sequi consequuntur corporis repudiandae fuga iste, deleniti
					voluptas. Ducimus consequuntur molestias sed vero dolorum pariatur est, quod praesentium rerum vel
					in eveniet repellendus nemo aliquid dolor hic ab nesciunt aut explicabo fugiat odio fugit a quasi
					numquam! Exercitationem ut eos optio rerum, porro eveniet excepturi! Voluptatum minus, in possimus
					facere laudantium ratione iste quam, quisquam temporibus harum dolor nesciunt enim hic! Sapiente
					tempora voluptatem ut nam iste earum officiis? Id earum atque minus assumenda, impedit quasi eos
					obcaecati rem error et modi, eaque hic necessitatibus ab ad officiis tenetur sequi, architecto
					minima aspernatur vel mollitia sit autem? Quae ratione ipsa delectus laudantium optio, voluptates
					eius architecto dolor excepturi harum, hic quia ex iusto sapiente esse, explicabo unde at. Ab
					corrupti quae enim repellat voluptates quibusdam labore iusto dolores officia nesciunt sunt sapiente
					modi, quos dignissimos laborum quisquam aperiam sed doloremque eius dicta aspernatur nobis beatae
					placeat quis? Possimus cumque unde aspernatur veniam laudantium optio deleniti quisquam
					necessitatibus laboriosam officia mollitia incidunt consequuntur nulla alias eos earum quis amet,
					vitae perferendis voluptas excepturi!
				</p>
                <img class="banner" src="banner.jpg" alt="banner" id="banner-1">
				<span>Баннер</span>
			</div>
		</main>
        <footer class="main-footer">
        </footer>
        <script>
			const banners = document.querySelectorAll(".banner");

			const sawBanners = [];
			const clickedBanners = [];

			const backendAPI = "http://localhost:5000/api";

			if (banners) {
				bannerWatch();
				document.addEventListener("scroll", bannerWatch);
				banners.forEach(banner => banner.addEventListener("click", bannerClick))
			}

			function bannerWatch(e) {
				banners.forEach(banner => {
					const bannerPosBot = banner.getBoundingClientRect().bottom;

					if (bannerPosBot < window.innerHeight && !sawBanners.includes(banner.id))
					{
						sawBanners.push(banner.id);
						fetchApi("/banner/watch", banner.id);
					}
				})
			}

			function bannerClick(e) {
				if (!clickedBanners.includes(e.target.id)) {
					clickedBanners.push(e.target.id)
					fetchApi("/banner/click", e.target.id)
				}
			}

			function fetchApi(path, body) {
				fetch(backendAPI + path, {
					method: "POST",
					headers: {
						"Content-Type": "application/json",
						"Accept": "application/json"
					},
					body: JSON.stringify(body)
				})
				.then(res => res.json())
				.then(data => console.log(data))
			}
        </script>
	</body>
</html>
